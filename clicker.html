<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epstein Clicker</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
* { user-select:none; margin:0; padding:0; box-sizing:border-box; }
body {
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    height:100vh; background:linear-gradient(to right,#1a1a1a,#333);
    font-family:Arial; color:white; overflow:hidden;
}
h1 { margin-bottom:20px; }
#clickImage { width:150px; cursor:pointer; transition:0.1s; }
#clickImage:active { transform:scale(1.2); }
#counter { margin-top:20px; font-size:24px; }

.buttons { margin-top:20px; display:flex; gap:10px; }

button {
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    color:white;
}

#shopBtn { background:#4caf50; }
#achBtn { background:#2196F3; }

.shop-button {
    margin-top:5px;
    background:#2196F3;
}

.progress {
    width:100%;
    height:10px;
    background:#444;
    border-radius:5px;
    margin-top:5px;
}
.progress-bar {
    height:100%;
    background:#4caf50;
    border-radius:5px;
    width:0%;
}

.particle {
    position:absolute; border-radius:50%; pointer-events:none;
    animation:particleAnim 0.6s forwards;
}
@keyframes particleAnim {
    to { opacity:0; transform:translate(var(--x),var(--y)) scale(0); }
}
</style>
</head>

<body>

<h1>Epstein Clicker</h1>
<img id="clickImage" src="https://files.catbox.moe/qpug9h.jpeg">
<div id="counter"></div>

<div class="buttons">
    <button id="shopBtn">Tienda</button>
    <button id="achBtn">Logros</button>
</div>

<script>
const image = document.getElementById('clickImage');
const counter = document.getElementById('counter');
const shopBtn = document.getElementById('shopBtn');
const achBtn = document.getElementById('achBtn');
const body = document.body;

// Estado
let clicks = parseInt(localStorage.getItem('epsteinClicks')) || 0;
let islaComprada = localStorage.getItem('islaComprada') === 'true';
let niñosCount = parseInt(localStorage.getItem('niñosCount')) || 0;
let asistentesCount = parseInt(localStorage.getItem('asistentesCount')) || 0;
let epsteinPrimeComprado = localStorage.getItem('epsteinPrime') === 'true';

updateCounter();
if(epsteinPrimeComprado) image.src = 'https://files.catbox.moe/7qsf1t.PNG';

document.addEventListener('contextmenu', e => e.preventDefault());

/* ---------- CLICK ---------- */
image.addEventListener('click', e => {
    let clicksPorClick = 1;
    if(epsteinPrimeComprado) clicksPorClick = 10;
    clicks += clicksPorClick;
    updateCounter();
    spawnParticles(e.clientX,e.clientY);
});

function spawnParticles(x,y){
    for(let i=0;i<10;i++){
        const p=document.createElement('div');
        p.className='particle';
        p.style.width=p.style.height=Math.random()*8+4+'px';
        p.style.background=`hsl(${Math.random()*360},100%,70%)`;
        p.style.left=x+'px';
        p.style.top=y+'px';
        p.style.setProperty('--x',(Math.random()-0.5)*100+'px');
        p.style.setProperty('--y',(Math.random()-0.5)*100+'px');
        body.appendChild(p);
        setTimeout(()=>p.remove(),600);
    }
}

function updateCounter(){
    counter.textContent=`Clicks: ${clicks}`;
    localStorage.setItem('epsteinClicks',clicks);
}

/* ---------- TIENDA ---------- */
shopBtn.addEventListener('click',()=>{
    const precioNiño = 15 * Math.pow(2, niñosCount);
    const precioAsistente = 5 * Math.pow(1.5, asistentesCount);
    const precioPrime = 5000;

    Swal.fire({
        title:'Tienda',
        background:'#222',
        showConfirmButton:false,
        html:`
        <div style="text-align:left">

            <!-- Isla -->
            <div style="margin-bottom:15px">
                <strong>Isla</strong><br>
                <small>Da clicks automáticos cada 5 segundos</small><br>
                ${islaComprada ? '<span style="color:#4caf50;font-weight:bold;">Ya comprado</span>'
                : '<button id="buyIsla" class="shop-button">Comprar - 300 clicks</button>'}
            </div>

            <!-- Niño -->
            <div style="margin-bottom:15px">
                <strong>Niño</strong><br>
                <small>Te da 1 click por segundo.<br>Tienes <b>${niñosCount}</b> niños.</small><br>
                <button id="buyNiño" class="shop-button">Comprar - ${precioNiño} clicks</button>
            </div>

            <!-- Asistente -->
            <div style="margin-bottom:15px">
                <strong>Asistente</strong><br>
                <small>Te da 1 click por segundo.<br>Tienes <b>${asistentesCount}</b> asistentes.</small><br>
                <button id="buyAsistente" class="shop-button">Comprar - ${Math.floor(precioAsistente)} clicks</button>
            </div>

            <!-- Epstein Prime -->
            <div style="margin-bottom:15px">
                <strong>Epstein Prime</strong><br>
                <small>Tu Epstein entra en su prime</small><br>
                ${epsteinPrimeComprado
                ? '<span style="color:#4caf50;font-weight:bold;">Ya comprado</span>'
                : `<button id="buyPrime" class="shop-button">Comprar - ${precioPrime} clicks</button>`}
            </div>

        </div>
        `,
        didOpen:()=>{
            // Isla
            const islaBtn=document.getElementById('buyIsla');
            if(islaBtn){
                islaBtn.onclick=()=>{
                    if(clicks>=300){
                        clicks-=300; islaComprada=true;
                        localStorage.setItem('islaComprada','true');
                        updateCounter();
                        startIsla();
                        Swal.fire('Comprado','','success');
                    }
                };
            }
            // Niño
            document.getElementById('buyNiño').onclick=()=>{
                if(clicks>=precioNiño){
                    clicks-=precioNiño; niñosCount++;
                    localStorage.setItem('niñosCount',niñosCount);
                    updateCounter();
                    Swal.fire('Comprado','','success');
                }
            };
            // Asistente
            document.getElementById('buyAsistente').onclick=()=>{
                if(clicks>=precioAsistente){
                    clicks-=precioAsistente; asistentesCount++;
                    localStorage.setItem('asistentesCount',asistentesCount);
                    updateCounter();
                    Swal.fire('Comprado','','success');
                }
            };
            // Epstein Prime
            const primeBtn=document.getElementById('buyPrime');
            if(primeBtn){
                primeBtn.onclick=()=>{
                    if(clicks>=precioPrime){
                        clicks-=precioPrime; epsteinPrimeComprado=true;
                        localStorage.setItem('epsteinPrime','true');
                        // Cambia la imagen al instante
                        image.src='https://files.catbox.moe/7qsf1t.PNG';
                        updateCounter();
                        Swal.fire('Epstein Prime desbloqueado!','','success');
                    }
                };
            }
        }
    });
});

/* ---------- LOGROS ---------- */
achBtn.addEventListener('click',()=>{
    const progPrincipiante=Math.min(clicks/5*100,100);
    const progIsla=islaComprada?100:0;
    const progNegociador=Math.min(niñosCount/35*100,100);

    Swal.fire({
        title:'Logros',
        background:'#222',
        showConfirmButton:false,
        html:`
        <div style="text-align:left">

            <div style="margin-bottom:15px">
                <strong>Principiante</strong><br>
                <small>Consigue 5 clicks</small>
                <div class="progress"><div class="progress-bar" style="width:${progPrincipiante}%"></div></div>
            </div>

            <div style="margin-bottom:15px">
                <strong>Isla Jeffrey</strong><br>
                <small>Compra la isla</small>
                <div class="progress"><div class="progress-bar" style="width:${progIsla}%"></div></div>
            </div>

            <div>
                <strong>Negociador profesional</strong><br>
                <small>Compra 35 niños</small>
                <div class="progress"><div class="progress-bar" style="width:${progNegociador}%"></div></div>
            </div>

        </div>
        `
    });
});

/* ---------- AUTO ---------- */
function startIsla(){
    setInterval(()=>{
        clicks+=Math.floor(Math.random()*101);
        updateCounter();
    },5000);
}

function startNiños(){
    setInterval(()=>{
        if(niñosCount>0) clicks+=niñosCount;
        if(asistentesCount>0) clicks+=asistentesCount;
        updateCounter();
    },1000);
}

if(islaComprada) startIsla();
startNiños();
</script>

</body>
</html>
